<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Airdrop | Blockcore Documentation</title>
    <meta name="generator" content="VuePress 1.5.1">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#51b13e">
    <link rel="stylesheet" href="/styles/variables.css">
    <meta name="description" content="Blockcore Official Documentation">
    <meta name="msapplication-TileColor" content="#0f3b21">
    <meta name="theme-color" content="#ffffff">
    <link rel="preload" href="/assets/css/0.styles.6e9a4710.css" as="style"><link rel="preload" href="/assets/js/app.f0d64147.js" as="script"><link rel="preload" href="/assets/js/3.26f3d11e.js" as="script"><link rel="preload" href="/assets/js/21.3d530748.js" as="script"><link rel="prefetch" href="/assets/js/10.99fcd1b5.js"><link rel="prefetch" href="/assets/js/11.ce1f063c.js"><link rel="prefetch" href="/assets/js/12.c99197b6.js"><link rel="prefetch" href="/assets/js/13.c4e03edb.js"><link rel="prefetch" href="/assets/js/14.0be8db0a.js"><link rel="prefetch" href="/assets/js/15.c9a4284e.js"><link rel="prefetch" href="/assets/js/16.6b47e2aa.js"><link rel="prefetch" href="/assets/js/17.512ef3d7.js"><link rel="prefetch" href="/assets/js/18.835be0ad.js"><link rel="prefetch" href="/assets/js/19.4b3740e1.js"><link rel="prefetch" href="/assets/js/20.57ef98eb.js"><link rel="prefetch" href="/assets/js/22.17d43d23.js"><link rel="prefetch" href="/assets/js/23.aa9e5890.js"><link rel="prefetch" href="/assets/js/24.e2bd7d0c.js"><link rel="prefetch" href="/assets/js/25.ff0699dc.js"><link rel="prefetch" href="/assets/js/26.e0430710.js"><link rel="prefetch" href="/assets/js/27.0be36ad0.js"><link rel="prefetch" href="/assets/js/28.3a2760ae.js"><link rel="prefetch" href="/assets/js/29.698fa4b0.js"><link rel="prefetch" href="/assets/js/30.8da640a7.js"><link rel="prefetch" href="/assets/js/31.6b266bf7.js"><link rel="prefetch" href="/assets/js/32.180ce65e.js"><link rel="prefetch" href="/assets/js/33.222ac523.js"><link rel="prefetch" href="/assets/js/34.a8cad795.js"><link rel="prefetch" href="/assets/js/35.c1b7c482.js"><link rel="prefetch" href="/assets/js/36.2184e160.js"><link rel="prefetch" href="/assets/js/37.cf2f758a.js"><link rel="prefetch" href="/assets/js/38.5d296541.js"><link rel="prefetch" href="/assets/js/39.3ad1249e.js"><link rel="prefetch" href="/assets/js/4.3703d2c9.js"><link rel="prefetch" href="/assets/js/40.3733f480.js"><link rel="prefetch" href="/assets/js/41.cbfc8dfe.js"><link rel="prefetch" href="/assets/js/42.b15001ac.js"><link rel="prefetch" href="/assets/js/43.c823c9cb.js"><link rel="prefetch" href="/assets/js/44.2d22b953.js"><link rel="prefetch" href="/assets/js/45.9f755fb4.js"><link rel="prefetch" href="/assets/js/46.99a896a7.js"><link rel="prefetch" href="/assets/js/5.65c8cdcf.js"><link rel="prefetch" href="/assets/js/6.e8f6683d.js"><link rel="prefetch" href="/assets/js/7.85832266.js"><link rel="prefetch" href="/assets/js/8.7d869c6d.js"><link rel="prefetch" href="/assets/js/9.73e979cc.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.a4031134.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6e9a4710.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/blockcore.svg" alt="Blockcore Documentation" class="logo"> <span class="site-name can-hide">Blockcore Documentation</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://www.blockcore.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Website
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://discord.gg/xa5BxWr" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chat
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/block-core/" target="_blank" rel="noopener noreferrer github" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/block-core/documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://www.blockcore.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Website
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://discord.gg/xa5BxWr" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chat
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/block-core/" target="_blank" rel="noopener noreferrer github" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/block-core/documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">Introduction</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Platform</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Overview/" class="sidebar-link">Overview</a></li><li><a href="/UseCases/" class="sidebar-link">Use Cases</a></li><li><a href="/ReferenceNodes/" class="sidebar-link">Reference Nodes</a></li><li><a href="/Walkthrough/" class="sidebar-link">Walkthrough</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Node</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/Features" class="sidebar-heading clickable open"><span>Features</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/FeaturesAirdrop/" aria-current="page" class="active sidebar-link">Airdrop</a></li><li><a href="/FeaturesBlockstore/" class="sidebar-link">Blockstore</a></li><li><a href="/FeaturesBlockExplorer/" class="sidebar-link">Block Explorer (local)</a></li><li><a href="/FeaturesColdStaking/" class="sidebar-link">Cold Staking</a></li><li><a href="/FeaturesConsensus/" class="sidebar-link">Consensus</a></li><li><a href="/FeaturesDiagnostics/" class="sidebar-link">Diagnostics</a></li><li><a href="/FeaturesDns/" class="sidebar-link">DNS</a></li><li><a href="/FeaturesMemoryPool/" class="sidebar-link">Memory Pool</a></li><li><a href="/FeaturesMiner/" class="sidebar-link">Miner</a></li><li><a href="/FeaturesNodeHost/" class="sidebar-link">NodeHost</a></li><li><a href="/FeaturesNotifications/" class="sidebar-link">Notifications</a></li><li><a href="/FeaturesPoA/" class="sidebar-link">PoA</a></li><li><a href="/FeaturesRPC/" class="sidebar-link">RPC</a></li><li><a href="/FeaturesStorage/" class="sidebar-link">Storage</a></li><li><a href="/FeaturesWallet/" class="sidebar-link">Wallet</a></li><li><a href="/FeaturesWalletWatchOnly/" class="sidebar-link">Wallet (watch only)</a></li><li><a href="/FeaturesWalletNotify/" class="sidebar-link">Wallet Notify</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/NodeApi" class="sidebar-heading clickable"><span>API</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/PeerToPeer" class="sidebar-heading clickable"><span>P2P</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Support and Community</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/FAQ" class="sidebar-heading clickable open"><span>FAQ and common issues</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/FAQ-General/" class="sidebar-link">General FAQ</a></li><li><a href="/FAQ/FAQ-Deployment/" class="sidebar-link">Deployment FAQ</a></li><li><a href="/FAQ/FAQ-Synchronization/" class="sidebar-link">Synchronization FAQ</a></li><li><a href="/FAQ/FAQ-Integrations/" class="sidebar-link">Integrations FAQ</a></li><li><a href="/FAQ/FAQ-Wallet/" class="sidebar-link">Wallet FAQ</a></li></ul></section></li><li><a href="/Support/" class="sidebar-link">Support</a></li><li><a href="/Contribute/" class="sidebar-link">Contribute</a></li><li><a href="/Community/" class="sidebar-link">Community</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Development</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Development/" class="sidebar-link">Development</a></li><li><a href="/SecurityIssues/" class="sidebar-link">Security Issues</a></li><li><a href="/SigningCommits/" class="sidebar-link">Signing Commits</a></li><li><a href="/Architecture/" class="sidebar-link">Architecture</a></li><li><a href="https://btc.indexer.blockcore.net/docs/index.html" target="_blank" rel="noopener noreferrer" class="sidebar-link">Blockcore Indexer API<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="airdrop"><a href="#airdrop" class="header-anchor">#</a> Airdrop</h1> <p>A helper tool for airdrops it can create UTXO snapshots and distribute coins.</p> <h2 id="how-to-use-the-airdrop-feature"><a href="#how-to-use-the-airdrop-feature" class="header-anchor">#</a> How to use the Airdrop feature</h2> <p>The airdrop feature has two modes <code>snapshot</code> and <code>distribute</code></p> <p>The Airdrop is considered to be a manual processes so it can be run in debug mode and some changes are applied directly to the code, such places are marked as <code>Manual:</code> in the <code>distribute</code> class.
To enable the feature in the node builder register the feature itself similar to the bellow example.</p> <div class="language- extra-class"><pre class="language-text"><code>                var builder = new FullNodeBuilder()
                            .UseNodeSettings(nodeSettings)
                            .UseBlockStore()
                            .UsePosConsensus()
                            .UseColdStakingWallet()
                            .UseApi()
                            .UseMempool()
                            .Airdrop();
</code></pre></div><p>Then run the node with either of the modes enabled.</p> <div class="language- extra-class"><pre class="language-text"><code>To build the solution the relevant projects and daemon of the chain
need to be referenced in the Blockcore.Features.Airdrop.sln file 
</code></pre></div><h2 id="snapshot"><a href="#snapshot" class="header-anchor">#</a> Snapshot</h2> <p>Will take a snapshot of the UTXO set of a node and push this to a db to a table name <code>UnspentOutputs</code>.
When the snapshot is running no new blocks will get validated (the consensus processes will block).</p> <p>To start the node in snapshot mode pass in the command arguments <code>-snapshot -snapshotheight=[height]</code> not if the node is passed the given height snapshot is ignored, to get the node back to a certain point in time debug the consensus code and manually override the ChainHeader that is the tip (in the future such a flag may be built in to the node).</p> <p>Once the snapshot is complete a file named <code>snapshot-[height].db</code> will appear in the nodes data folder.</p> <h2 id="distribute"><a href="#distribute" class="header-anchor">#</a> Distribute</h2> <p>Will send coins from the local wallet to addresses that have been predefined in the table <code>DistributeOutputs</code> in the db this table needs to be populated in advance and it allows to prepare the addresses (and or script) that are going to be airdropped.</p> <p>A background worker will start and read the entries from the database then send coins to those entries.
Currently the code will only create one trx with 500 outputs (this can be easily changed) and wait for that trx to get confirmed before processing the next batch.</p> <p>To start the node in snapshot mode pass in the command arguments <code>-distribute -snapshotheight=[height]</code> the <code>snapshotheight</code> is required to know the db filename.</p> <h2 id="steps-how-to-start"><a href="#steps-how-to-start" class="header-anchor">#</a> Steps how to start</h2> <ol><li>Run the airdrop tool on the source node in snapshot mode</li> <li>Copy the database to the target nodes data folder</li> <li>Edit the database and populate the table <code>DistributeOutputs</code></li> <li>Run in airdrop tool on the target node in distribute mode</li></ol> <h2 id="useful-sql-queries"><a href="#useful-sql-queries" class="header-anchor">#</a> Useful SQL Queries</h2> <p>Group all outputs by address and sum the total value</p> <div class="language- extra-class"><pre class="language-text"><code>SELECT Address, Script, ScriptType, count(Address), Sum(Value) as Value
FROM UnspentOutputs
WHERE Address != &quot;[address-to-ignore]&quot;
AND Address != &quot;[address-to-ignore]&quot;
GROUP BY Address
ORDER By Sum(Value) DESC
</code></pre></div><p>The total number of outputs and total value after the grouping</p> <div class="language- extra-class"><pre class="language-text"><code>SELECT count(*), Sum(Value) FROM (
SELECT Address, Script, ScriptType, count(Address), Sum(Value) as Value
FROM UnspentOutputs
WHERE Address != &quot;[address-to-ignore]&quot;
AND Address != &quot;[address-to-ignore]&quot;
GROUP BY Address
ORDER By Sum(Value) DESC
)
</code></pre></div><p>Copy entries to the distribution table, this will contain all the addresses to airdrop on</p> <div class="language- extra-class"><pre class="language-text"><code>INSERT INTO DistributeOutputs (Address, Script, ScriptType, Height, Value)
SELECT Address, Script, ScriptType, 0, Sum(Value) as Value
FROM UnspentOutputs
WHERE Address != &quot;[address-to-ignore]&quot;
AND Address != &quot;[address-to-ignore]&quot;
GROUP BY Address
ORDER By Sum(Value) DESC
</code></pre></div><p>Follow progress of distribution</p> <div class="language- extra-class"><pre class="language-text"><code>select status, count(status) FROM DistributeOutputs 
GROUP BY status 
</code></pre></div><p>Tool recommended to use is <code>DB browser for SQLite</code></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/block-core/documentation/edit/master/docs/FeaturesAirdrop.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Walkthrough/" class="prev">
        Walkthrough
      </a></span> <span class="next"><a href="/FeaturesBlockstore/">
        Blockstore
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f0d64147.js" defer></script><script src="/assets/js/3.26f3d11e.js" defer></script><script src="/assets/js/21.3d530748.js" defer></script>
  </body>
</html>
