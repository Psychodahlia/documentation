<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Features: Storage | Blockcore Documentation</title>
    <meta name="generator" content="VuePress 1.5.1">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#51b13e">
    <link rel="stylesheet" href="/styles/variables.css">
    <meta name="description" content="Blockcore Official Documentation">
    <meta name="msapplication-TileColor" content="#0f3b21">
    <meta name="theme-color" content="#ffffff">
    <link rel="preload" href="/assets/css/0.styles.6e9a4710.css" as="style"><link rel="preload" href="/assets/js/app.f0d64147.js" as="script"><link rel="preload" href="/assets/js/3.26f3d11e.js" as="script"><link rel="preload" href="/assets/js/34.a8cad795.js" as="script"><link rel="prefetch" href="/assets/js/10.99fcd1b5.js"><link rel="prefetch" href="/assets/js/11.ce1f063c.js"><link rel="prefetch" href="/assets/js/12.c99197b6.js"><link rel="prefetch" href="/assets/js/13.c4e03edb.js"><link rel="prefetch" href="/assets/js/14.0be8db0a.js"><link rel="prefetch" href="/assets/js/15.c9a4284e.js"><link rel="prefetch" href="/assets/js/16.6b47e2aa.js"><link rel="prefetch" href="/assets/js/17.512ef3d7.js"><link rel="prefetch" href="/assets/js/18.835be0ad.js"><link rel="prefetch" href="/assets/js/19.4b3740e1.js"><link rel="prefetch" href="/assets/js/20.57ef98eb.js"><link rel="prefetch" href="/assets/js/21.3d530748.js"><link rel="prefetch" href="/assets/js/22.17d43d23.js"><link rel="prefetch" href="/assets/js/23.aa9e5890.js"><link rel="prefetch" href="/assets/js/24.e2bd7d0c.js"><link rel="prefetch" href="/assets/js/25.ff0699dc.js"><link rel="prefetch" href="/assets/js/26.e0430710.js"><link rel="prefetch" href="/assets/js/27.0be36ad0.js"><link rel="prefetch" href="/assets/js/28.3a2760ae.js"><link rel="prefetch" href="/assets/js/29.698fa4b0.js"><link rel="prefetch" href="/assets/js/30.8da640a7.js"><link rel="prefetch" href="/assets/js/31.6b266bf7.js"><link rel="prefetch" href="/assets/js/32.180ce65e.js"><link rel="prefetch" href="/assets/js/33.222ac523.js"><link rel="prefetch" href="/assets/js/35.c1b7c482.js"><link rel="prefetch" href="/assets/js/36.2184e160.js"><link rel="prefetch" href="/assets/js/37.cf2f758a.js"><link rel="prefetch" href="/assets/js/38.5d296541.js"><link rel="prefetch" href="/assets/js/39.3ad1249e.js"><link rel="prefetch" href="/assets/js/4.3703d2c9.js"><link rel="prefetch" href="/assets/js/40.3733f480.js"><link rel="prefetch" href="/assets/js/41.cbfc8dfe.js"><link rel="prefetch" href="/assets/js/42.b15001ac.js"><link rel="prefetch" href="/assets/js/43.c823c9cb.js"><link rel="prefetch" href="/assets/js/44.2d22b953.js"><link rel="prefetch" href="/assets/js/45.9f755fb4.js"><link rel="prefetch" href="/assets/js/46.99a896a7.js"><link rel="prefetch" href="/assets/js/5.65c8cdcf.js"><link rel="prefetch" href="/assets/js/6.e8f6683d.js"><link rel="prefetch" href="/assets/js/7.85832266.js"><link rel="prefetch" href="/assets/js/8.7d869c6d.js"><link rel="prefetch" href="/assets/js/9.73e979cc.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.a4031134.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6e9a4710.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/blockcore.svg" alt="Blockcore Documentation" class="logo"> <span class="site-name can-hide">Blockcore Documentation</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://www.blockcore.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Website
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://discord.gg/xa5BxWr" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chat
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/block-core/" target="_blank" rel="noopener noreferrer github" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/block-core/documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://www.blockcore.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Website
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://discord.gg/xa5BxWr" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chat
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/block-core/" target="_blank" rel="noopener noreferrer github" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/block-core/documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">Introduction</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Platform</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Overview/" class="sidebar-link">Overview</a></li><li><a href="/UseCases/" class="sidebar-link">Use Cases</a></li><li><a href="/ReferenceNodes/" class="sidebar-link">Reference Nodes</a></li><li><a href="/Walkthrough/" class="sidebar-link">Walkthrough</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Node</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/Features" class="sidebar-heading clickable open"><span>Features</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/FeaturesAirdrop/" class="sidebar-link">Airdrop</a></li><li><a href="/FeaturesBlockstore/" class="sidebar-link">Blockstore</a></li><li><a href="/FeaturesBlockExplorer/" class="sidebar-link">Block Explorer (local)</a></li><li><a href="/FeaturesColdStaking/" class="sidebar-link">Cold Staking</a></li><li><a href="/FeaturesConsensus/" class="sidebar-link">Consensus</a></li><li><a href="/FeaturesDiagnostics/" class="sidebar-link">Diagnostics</a></li><li><a href="/FeaturesDns/" class="sidebar-link">DNS</a></li><li><a href="/FeaturesMemoryPool/" class="sidebar-link">Memory Pool</a></li><li><a href="/FeaturesMiner/" class="sidebar-link">Miner</a></li><li><a href="/FeaturesNodeHost/" class="sidebar-link">NodeHost</a></li><li><a href="/FeaturesNotifications/" class="sidebar-link">Notifications</a></li><li><a href="/FeaturesPoA/" class="sidebar-link">PoA</a></li><li><a href="/FeaturesRPC/" class="sidebar-link">RPC</a></li><li><a href="/FeaturesStorage/" aria-current="page" class="active sidebar-link">Storage</a></li><li><a href="/FeaturesWallet/" class="sidebar-link">Wallet</a></li><li><a href="/FeaturesWalletWatchOnly/" class="sidebar-link">Wallet (watch only)</a></li><li><a href="/FeaturesWalletNotify/" class="sidebar-link">Wallet Notify</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/NodeApi" class="sidebar-heading clickable"><span>API</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/PeerToPeer" class="sidebar-heading clickable"><span>P2P</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Support and Community</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/FAQ" class="sidebar-heading clickable open"><span>FAQ and common issues</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/FAQ-General/" class="sidebar-link">General FAQ</a></li><li><a href="/FAQ/FAQ-Deployment/" class="sidebar-link">Deployment FAQ</a></li><li><a href="/FAQ/FAQ-Synchronization/" class="sidebar-link">Synchronization FAQ</a></li><li><a href="/FAQ/FAQ-Integrations/" class="sidebar-link">Integrations FAQ</a></li><li><a href="/FAQ/FAQ-Wallet/" class="sidebar-link">Wallet FAQ</a></li></ul></section></li><li><a href="/Support/" class="sidebar-link">Support</a></li><li><a href="/Contribute/" class="sidebar-link">Contribute</a></li><li><a href="/Community/" class="sidebar-link">Community</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Development</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Development/" class="sidebar-link">Development</a></li><li><a href="/SecurityIssues/" class="sidebar-link">Security Issues</a></li><li><a href="/SigningCommits/" class="sidebar-link">Signing Commits</a></li><li><a href="/Architecture/" class="sidebar-link">Architecture</a></li><li><a href="https://btc.indexer.blockcore.net/docs/index.html" target="_blank" rel="noopener noreferrer" class="sidebar-link">Blockcore Indexer API<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="features-storage"><a href="#features-storage" class="header-anchor">#</a> Features: Storage</h1> <p>The storage feature is an feature that enables nodes to synchronize and store documents. It has structured handling of some document types and supports generic data storage.</p> <h2 id="use-case"><a href="#use-case" class="header-anchor">#</a> Use case</h2> <p>The use case for storage is a way to have a decentralized and distributed storage mechanism for data. The primary data type is text based documents in JSON format.</p> <p>Documents must be signed by the original author and the signature must be included with the document for verification.</p> <p>Data can be stored unencrypted and encrypted.</p> <p>One example of use case is storing the personal contact list. This is something that typically would be stored encrypted and not readable by third parties.</p> <p>Another example of use case is storing awards and certifications received, which can be used to lookup and verify completed courses and valid certifications.</p> <h2 id="api"><a href="#api" class="header-anchor">#</a> API</h2> <p>Most interactions with the storage feature is done through REST API that is made public available. It is also possible to run your own local node with the storage feature enabled.</p> <p>Nodes that are public, are refered to as hubs.</p> <h2 id="identities"><a href="#identities" class="header-anchor">#</a> Identities</h2> <p>The main artefact of the storage feature, is identity. Identities are always synchronized across nodes. They are free of charge by users who use the APIs.</p> <p>There is limit to fields that are allowed and length of the fields on the identity. Since the identities are free and shared across all nodes, they must be limited.</p> <p>Everything is connected to the identities. A person can have one or multiple identities. A person can also make identities for their business entities and other resources, such as servers, hubs and more.</p> <p>Your identities is the foundation of secure messaging, for verification and social networking and a lot more.</p> <p>Example:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;identity/P9ppftn667PgXwqCKNaUVnD8BS8rjmkcUo&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;signature&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ICSoxi6ScRYozMeDGU0+gZAltyis27mUA16JeAT2u24xSH23LEaAKwXJjv4dbWPhvfZbTFmr/fy7/MWTbXpgdDY=&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;identifier&quot;</span><span class="token operator">:</span> <span class="token string">&quot;P9ppftn667PgXwqCKNaUVnD8BS8rjmkcUo&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;height&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Sondre Bjellås&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;shortName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SondreB&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;alias&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Vanarki&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
    <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sondre@outlook.com&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://www.sondreb.com&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;image&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://avatars1.githubusercontent.com/u/309938?s=460&amp;u=c82ed1827100905dc561460fdfc68ca463b29194&amp;v=4&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hubs&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The &quot;id&quot; on the &quot;container&quot; is based on the container and the identifier in the content.</p> <p>The &quot;content&quot; is what consititutes the &quot;document&quot; and is signed. The &quot;container&quot; is not verified and can be modified by the nodes indiscriminately. You can only trust the &quot;content&quot;, not the &quot;container&quot;.</p> <p>The &quot;content/hubs&quot; is a list of identifiers of hubs that the user uses to store their data. As mentioned before, identities is shared across all nodes, but identity is the only data that is shared like this. Other data is stored on specific hubs.</p> <h2 id="data"><a href="#data" class="header-anchor">#</a> Data</h2> <p>Data other than the identities is normally retrieved from known hubs.</p> <p>If for example the &quot;image&quot; field on the identity contains a relative path, it means that the image is stored on the hubs.</p> <p>Example:</p> <div class="language-json extra-class"><pre class="language-json"><code>  <span class="token punctuation">{</span>
  <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;identifier&quot;</span><span class="token operator">:</span> <span class="token string">&quot;P9ppftn667PgXwqCKNaUVnD8BS8rjmkcUo&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;image&quot;</span><span class="token operator">:</span> <span class="token string">&quot;data/jysdfzx234.jpg&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hubs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;P4xYftn667PgXwqCKNaUVnD8BS8rjmkcUo&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>In the example above, the profile image can be retrieved using the following actions:</p> <ol><li>Query the identity API for the identity of the hub.</li> <li>Get the &quot;url&quot; of the hub identity, e.g. &quot;https://city.hub.blockcore.net&quot;.</li> <li>Combine the URL of the hub with the relative path, e.g. &quot;https://city.hub.blockcore.net/data/jysdfzx234.jpg&quot;</li> <li>Then you can either download that image, or show it to the users of your app.</li></ol> <p>Data structures are always stored under the identifier of an identity. Remember that identities is not just human beings, it can also be pets, hubs, servers and applications.</p> <p>If you develop your own application named &quot;CuteCatPhotos&quot; which is a collection of links to externally hosted photos, your storage path might be:</p> <p>/data/P1ppftn667PgXwqCKNaUVnD8BS8rjmkcUo/</p> <p>When a user interacts with your application, content created might be stored under the identity of your application, or it might be stored under their own identity.</p> <p>/data/P9ppftn667PgXwqCKNaUVnD8BS8rjmkcUo/</p> <p>If data is stored under the identity of the user, it means that the user owns the data and is the only one that can edit or remove the data.</p> <p>When the data is stored under the identity of the app, data can be updated by either the app, but also by the user, depending on how the application is developed.</p> <h3 id="payment"><a href="#payment" class="header-anchor">#</a> Payment</h3> <p>Data is stored on hubs and these are either free of charge, or based on agreements. Anyone can host their own hub if they want to.</p> <p>Users can sign up and pay for subscriptions to a hub through various means, and then user management happens with API keys that the hub owner manages.</p> <p>Last option is to utilize hubs that is built around automatic invoicing. These will invoice the identity on a regular interval for the amount of traffic and storage that is being consumed. If the user does not pay the invoice, their data might be deleted off the hub.</p> <p>This means that there are limitless options on how to do payment for storage, compared to blockchain based storage solutions that uses transaction fees.</p> <p>Payment like described here allows anyone to begin develop Web3 applications and use the storage functionality without the use of wallet and cryptocurrency.</p> <h2 id="signing"><a href="#signing" class="header-anchor">#</a> Signing</h2> <p>Identities are a known type and must follow a strict set of schema. This class must be marked with the [MessagePackObject] attribute.</p> <p>Each of the properties must be marked with a fixed order, with attribute like [Key(0)].</p> <p>When signing a document (&quot;content&quot;), you must first serialize your document using an Message Pack serializer. These are available for different languages and platforms, including JavaScript.</p> <div class="language-C# extra-class"><pre class="language-text"><code>// Example on how to derive the key pair needed for an identity.
string recoveryPhrase = &quot;mystery problem faith negative member bottom concert bundle asthma female process twelve&quot;;
var mnemonic = new Mnemonic(recoveryPhrase);
ExtKey masterNode = mnemonic.DeriveExtKey();
ExtKey identityRoot = masterNode.Derive(new KeyPath(&quot;m/302'&quot;));
ExtKey identity = identityRoot.Derive(0, true);

// Create an identity profile that should be signed and published.
Identity identityModel = new Identity
{
   Identifier = identity0Id,
   Name = &quot;John Doe&quot;,
   ShortName = &quot;John&quot;,
   Alias = &quot;JD&quot;,
   Title = &quot;Hi.&quot;,
   Url = &quot;https://&quot;,
   Image = &quot;https://&quot;,
   Height = 10,
   Hubs = new string[1] { &quot;PN9Gibo37UzogRC2cBxymvBtbM2p5eNfWi&quot; }
};

// Serialize to MessagePack.
byte[] entityBytes = MessagePackSerializer.Serialize(identityModel);

string signature = identity.PrivateKey.SignMessage(entityBytes);

// Encapsulate the identity into a container
var identityContainer = new IdentityDocument
{
   Id = &quot;identity/&quot; + identityModel.Identifier,
   Content = identityModel,
   Signature = signature
};

// Publish to local node or public hub.
</code></pre></div><h2 id="verification"><a href="#verification" class="header-anchor">#</a> Verification</h2> <p>Verification is done by redoing the message pack serialization, then checking to verify if the signature was signed with the private key of the public key (the identifier).</p> <div class="language-C# extra-class"><pre class="language-text"><code>byte[] entityBytes = MessagePackSerializer.Serialize(document.Content);

// You need a reference to the ProfileNetwork.
var bitcoinAddress = (BitcoinPubKeyAddress)BitcoinPubKeyAddress.Create(address, ProfileNetwork.Instance);

var valid = bitcoinAddress.VerifyMessage(entityBytes, document.Signature);
</code></pre></div><h2 id="synchronization"><a href="#synchronization" class="header-anchor">#</a> Synchronization</h2> <p>When nodes connect they will begin to exchange the signatures of all documents. This is done in chunks. As each node process the signatures of the other node, it will ask to retrieve documents that it is missing.</p> <p>When the document is retrieved based on the signature, the document is serialized and signature is verified. If everything is OK, then the height is used to validate if the received document is older or newer than the current.</p> <p>When a hub (node) receives a new or updated document through the REST API, it will immediately distribute the document to connected peers (nodes). A node that receives new/updated documents in full based on this push action, will forward a notification to all if its connected nodes with the signature it received. This ensures that there won't be duplicate transfer of documents and that newly observed documents are quickly distributed across the nodes.</p> <ol><li>Node A connects with Node B</li> <li>Both send StoragePayload with list of supported collections and request to get signatures.</li> <li>Both send StorageInvPayload with list of signatures in each of the collections supported.</li> <li>When node discover a signature that is not available locally, it sends a StoragePayload request to retrieve the missing document.</li> <li>When node receives missing document, it verifies if document is old or new version of existing document.</li></ol> <p><strong>Not implemented yet:</strong> The final step is to perform a verification of synchronized state, if both nodes has the same set of data.</p> <h2 id="versioning"><a href="#versioning" class="header-anchor">#</a> Versioning</h2> <p>The root document has a version attribute, and the node has built into it a minimum version and maximum version of known document types and the generic document type. If an unsupported document is received, nothing will happen. The document will not be persisted.</p> <p>Please note that the version on the container of the document, is not a revision number of the document itself. It is used for type compatibility checking.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/block-core/documentation/edit/master/docs/FeaturesStorage.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/FeaturesRPC/" class="prev">
        RPC
      </a></span> <span class="next"><a href="/FeaturesWallet/">
        Wallet
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f0d64147.js" defer></script><script src="/assets/js/3.26f3d11e.js" defer></script><script src="/assets/js/34.a8cad795.js" defer></script>
  </body>
</html>
